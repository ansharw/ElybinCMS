/*  Elybin CMS - elybin-function.js v.1.0.0 */
function ElybinSearch(){$("#notfound").hide(),$("#search").keyup(function(){searchTable()}),statusCheckUpdate()}function searchTable(){var e=$("#search").val(),t=$("#results"),n=0;t.find("tr").each(function(t,a){var i=$(a).find("td");if(i.length>0){var o=!1;$("#page-nav").hide(),i.each(function(t,a){var i=new RegExp(e,"i");return i.test($(a).text())?(o=!0,n++,!1):void 0}),1==o?$(a).fadeIn():$(a).hide()}}),""==$("#search").val()&&(ElybinPager(),$("#page-nav").fadeIn()),1>n?($("#notfound").fadeIn(),$("#page-nav").hide()):$("#notfound").hide()}function ElybinCheckAll(){$("#tooltip-ck").click(function(){checkAll(),statusCheckUpdate()})}function checkAll(){window.object="#results thead tr i",window.ob_check="fa fa-check-square",window.ob_uncheck="fa fa-square",window.lg_check="Check All",window.lg_uncheck="Uncheck All",$(window.object).attr("data-original-title")!==window.lg_uncheck?doCheckAll():doUncheckAll()}function statusCheckUpdate(){var e=0,t=0;$(window.object).removeClass(window.ob_check),$("input:checkbox:checked").each(function(){e+=1,$(this).is(":visible")&&(t+=1)}),t>0?statusUncheck():statusCheck(),e>0?$("#delall").fadeIn("fast"):$("#delall").hide()}function doCheckAll(){$("#results :checkbox").each(function(){$(this).is(":visible")&&$(this).prop("checked",!0)})}function doUncheckAll(){$("#results :checkbox").each(function(){$(this).is(":visible")&&$(this).prop("checked",!1)})}function statusUncheck(){$(window.object).attr("data-original-title",window.lg_uncheck),$(window.object).addClass(window.ob_uncheck)}function statusCheck(){$(window.object).attr("data-original-title",window.lg_check),$(window.object).addClass(window.ob_check)}function ElybinPager(){$("#results tbody tr").hide(),$("#delall").hide();var e=new Pager("results",10),t=!0;e.init(),e.showPageNav("pager","page-nav"),e.showPage(1),window.pager=e,window.start=t}function Pager(e,t){this.tableName=e,this.itemsPerPage=t,this.currentPage=1,this.pages=0,this.inited=!1,this.showRecords=function(t,n){var a=document.getElementById(e).rows;$("#results tbody tr").fadeOut();for(var i=0;i<a.length;i++)t>i||i>n?$("#results tbody tr:eq("+i+")").hide():$("#results tbody tr:eq("+i+")").stop().fadeIn()},this.showPage=function(e){if(this.currentPage!=e||0!=window.start){if(window.start=!1,!this.inited)return void alert("not inited");var n=document.getElementById("pg"+this.currentPage);n.className="",this.currentPage=e;var a=document.getElementById("pg"+this.currentPage);a.className="active";var i=(e-1)*t+0,o=i+t-1;this.showRecords(i,o),statusCheckUpdate()}},this.prev=function(){this.currentPage>1&&this.showPage(this.currentPage-1)},this.next=function(){this.currentPage<this.pages&&this.showPage(this.currentPage+1)},this.init=function(){var n=document.getElementById(e).rows,a=n.length-1;this.pages=Math.ceil(a/t),this.inited=!0},this.showPageNav=function(e,t){if(!this.inited)return void alert("not inited");for(var n=document.getElementById(t),a='<li><a onclick="'+e+'.prev();">Â«</a></li>',i=1;i<=this.pages;i++)a+='<li id="pg'+i+'"><a onclick="'+e+".showPage("+i+');">'+i+"</a></li>  ";a+='<li><a onclick="'+e+'.next();">&#187;</a></li>',n.innerHTML=a}}function countDelData(){$("#delall").click(function(){return DelData(),!1}),$(document).ready(function(){$("#delall").hide(),$("#results :checkbox").click(function(){statusCheckUpdate()})})}function DelData(){var e=$("input:checkbox:checked").length,t=new Array;$("input:checkbox:checked").each(function(){var e=explode("|",$(this).val()),n="	<li>"+e[1]+"</li>\r\n";t.push(n)});var n="<br/><b><i><ol>\r\n";for($i=0;e>$i;$i++)n+=t[$i];n+="</ol></b></i>",$("#deltext").html(n),e>0&&$("#deleteall").modal("show")}function explode(e,t,n){if(arguments.length<2||"undefined"==typeof e||"undefined"==typeof t)return null;if(""===e||e===!1||null===e)return!1;if("function"==typeof e||"object"==typeof e||"function"==typeof t||"object"==typeof t)return{0:""};e===!0&&(e="1"),e+="",t+="";var a=t.split(e);return"undefined"==typeof n?a:(0===n&&(n=1),n>0?n>=a.length?a:a.slice(0,n-1).concat([a.slice(n-1).join(e)]):-n>=a.length?[]:(a.splice(a.length+n),a))}function ElybinView(){$(function(){$("#view").on("hidden.bs.modal",function(){$("#view").removeData("bs.modal")}),$("#tooltip a#view-link").click(function(e){e.preventDefault(),$("#view").modal({remote:$(this).attr("href")})})})}function ElybinEditModal(){$(function(){$("#editmodal-btn").click(function(){var e=$("#editmodal-val1").val(),t=$("#editmodal-val2").val(),n=$("#editmodal-val3").val(),a=$("#editmodal-val4").val(),i=$("#editmodal-val5").val(),o=$("#editmodal-val6").val(),c=$("#editmodal-val7").val(),s="title="+e+"&content="+t+"&category_id="+n+"&author="+a+"&status="+i+"&act="+o+"&mod="+c;return $.ajax({type:"POST",url:"app/post/proses.php",data:s,cache:!1,success:function(e){var t="?mod=post&act=editquick&clear=yes&id="+e;$("#editmodal").modal({remote:t}),$("#post-count-panel").text(Number($("#post-count-panel").text())+1),$("#editmodal-val1").val(""),$("#editmodal-val2").val("")}}),!1}),$("#editmodal").on("hidden.bs.modal",function(){$("#editmodal").removeData("bs.modal")})})}function ElybinLocationPicker(e,t,n){$("#google-maps").locationpicker({location:{latitude:e,longitude:t},radius:300,inputBinding:{locationNameInput:$("#address")},enableAutocomplete:!0,onchanged:function(e){$("#coordinate span").html(e.latitude+", "+e.longitude),$("#btn-save").removeClass("btn-disabled").addClass("btn-success").html('<i class="fa fa-check"></i>&nbsp;Save Location')}}),$("#btn-save").click(function(){$(this).removeClass("btn-success").addClass("btn-disabled").html('<i class="fa fa-spinner"></i>&nbsp;Saving...').prop("disabled",!0);var e=$("#coordinate span").text(),t="option",a="site_coordinate",i="value="+e+"&pk="+t+"&name="+a;return $.ajax({type:"POST",url:n,data:i,cache:!1,success:function(e){e=explode(",",e),"ok"==e[0]&&($("#btn-save").removeClass("btn-disabled").addClass("btn-success").html('<i class="fa fa-check"></i>&nbsp;Saved!').prop("disabled",!1),window.history.back(),$.growl.notice({title:e[1],message:e[2]}),window.location.href="?mod=option")}}),!1})}function ElybinHideShow(e,t){var n=$("#"+e),a=$("#"+t),i=$("#"+t+" #close");i.hide(),n.click(function(){return $("#close").not("#"+t).click(),$(this).hide(),a.slideDown(),i.fadeIn(),!1}),i.click(function(){n.show(),a.slideUp(),i.hide()})}function uploadMedia(e,t,n){$("#summernote-progress").fadeIn(),data=new FormData,data.append("mod","media"),data.append("act","add"),data.append("callback","url"),data.append("file",e),$.ajax({url:"app/media/proses.php",xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",progressHandlingFunction,!1),e},data:data,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){t.insertImage(n,e)}})}function progressHandlingFunction(e){e.lengthComputable&&($("#summernote-progress .progress-bar").css({width:e.loaded/e.total*100+"%"}),$("#summernote-progress p span").html(Math.round(e.loaded/e.total*100)+"%"),e.loaded==e.total&&$("#summernote-progress").fadeOut(function(){$("#summernote-progress .progress-bar").css({width:"0%"}),$("#summernote-progress p span").html("0%")}))}function notif(){$("#notif .notification-description i").hide(),$("#notificon").click(function(){$("#notificon a .label").html(""),$.ajax({type:"POST",url:"app/notification/proses.php",data:"mod=notification&act=read",success:function(e){"ok"==e&&$("#notif").css("background","#efefef")}})})}